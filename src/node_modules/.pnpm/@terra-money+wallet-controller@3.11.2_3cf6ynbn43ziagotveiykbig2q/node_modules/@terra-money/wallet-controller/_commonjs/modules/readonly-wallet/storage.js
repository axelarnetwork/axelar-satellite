"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.clearStoredSession = exports.storeSession = exports.getStoredSession = void 0;
const terra_js_1 = require("@terra-money/terra.js");
const STORAGE_KEY = '__terra-readonly-wallet-storage-key__';
function getStoredSession() {
    const storedSessionString = localStorage.getItem(STORAGE_KEY);
    if (!storedSessionString)
        return undefined;
    try {
        const storedSession = JSON.parse(storedSessionString);
        if ('terraAddress' in storedSession &&
            'network' in storedSession &&
            typeof storedSession['terraAddress'] === 'string' &&
            terra_js_1.AccAddress.validate(storedSession.terraAddress)) {
            return storedSession;
        }
        else {
            localStorage.removeItem(STORAGE_KEY);
            return undefined;
        }
    }
    catch (_a) {
        localStorage.removeItem(STORAGE_KEY);
        return undefined;
    }
}
exports.getStoredSession = getStoredSession;
function storeSession(session) {
    if (!terra_js_1.AccAddress.validate(session.terraAddress)) {
        throw new Error(`${session.terraAddress} is not a terraAddress`);
    }
    localStorage.setItem(STORAGE_KEY, JSON.stringify(session));
}
exports.storeSession = storeSession;
function clearStoredSession() {
    localStorage.removeItem(STORAGE_KEY);
}
exports.clearStoredSession = clearStoredSession;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RvcmFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3NyYy9AdGVycmEtbW9uZXkvd2FsbGV0LWNvbnRyb2xsZXIvbW9kdWxlcy9yZWFkb25seS13YWxsZXQvc3RvcmFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxvREFBbUQ7QUFHbkQsTUFBTSxXQUFXLEdBQUcsdUNBQXVDLENBQUM7QUFFNUQsU0FBZ0IsZ0JBQWdCO0lBQzlCLE1BQU0sbUJBQW1CLEdBQUcsWUFBWSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUU5RCxJQUFJLENBQUMsbUJBQW1CO1FBQUUsT0FBTyxTQUFTLENBQUM7SUFFM0MsSUFBSTtRQUNGLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztRQUV0RCxJQUNFLGNBQWMsSUFBSSxhQUFhO1lBQy9CLFNBQVMsSUFBSSxhQUFhO1lBQzFCLE9BQU8sYUFBYSxDQUFDLGNBQWMsQ0FBQyxLQUFLLFFBQVE7WUFDakQscUJBQVUsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxFQUMvQztZQUNBLE9BQU8sYUFBYSxDQUFDO1NBQ3RCO2FBQU07WUFDTCxZQUFZLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3JDLE9BQU8sU0FBUyxDQUFDO1NBQ2xCO0tBQ0Y7SUFBQyxXQUFNO1FBQ04sWUFBWSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNyQyxPQUFPLFNBQVMsQ0FBQztLQUNsQjtBQUNILENBQUM7QUF2QkQsNENBdUJDO0FBRUQsU0FBZ0IsWUFBWSxDQUFDLE9BQThCO0lBQ3pELElBQUksQ0FBQyxxQkFBVSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLEVBQUU7UUFDOUMsTUFBTSxJQUFJLEtBQUssQ0FBQyxHQUFHLE9BQU8sQ0FBQyxZQUFZLHdCQUF3QixDQUFDLENBQUM7S0FDbEU7SUFDRCxZQUFZLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDN0QsQ0FBQztBQUxELG9DQUtDO0FBRUQsU0FBZ0Isa0JBQWtCO0lBQ2hDLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDdkMsQ0FBQztBQUZELGdEQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWNjQWRkcmVzcyB9IGZyb20gJ0B0ZXJyYS1tb25leS90ZXJyYS5qcyc7XG5pbXBvcnQgeyBSZWFkb25seVdhbGxldFNlc3Npb24gfSBmcm9tICcuL3R5cGVzJztcblxuY29uc3QgU1RPUkFHRV9LRVkgPSAnX190ZXJyYS1yZWFkb25seS13YWxsZXQtc3RvcmFnZS1rZXlfXyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yZWRTZXNzaW9uKCk6IFJlYWRvbmx5V2FsbGV0U2Vzc2lvbiB8IHVuZGVmaW5lZCB7XG4gIGNvbnN0IHN0b3JlZFNlc3Npb25TdHJpbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG5cbiAgaWYgKCFzdG9yZWRTZXNzaW9uU3RyaW5nKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qgc3RvcmVkU2Vzc2lvbiA9IEpTT04ucGFyc2Uoc3RvcmVkU2Vzc2lvblN0cmluZyk7XG5cbiAgICBpZiAoXG4gICAgICAndGVycmFBZGRyZXNzJyBpbiBzdG9yZWRTZXNzaW9uICYmXG4gICAgICAnbmV0d29yaycgaW4gc3RvcmVkU2Vzc2lvbiAmJlxuICAgICAgdHlwZW9mIHN0b3JlZFNlc3Npb25bJ3RlcnJhQWRkcmVzcyddID09PSAnc3RyaW5nJyAmJlxuICAgICAgQWNjQWRkcmVzcy52YWxpZGF0ZShzdG9yZWRTZXNzaW9uLnRlcnJhQWRkcmVzcylcbiAgICApIHtcbiAgICAgIHJldHVybiBzdG9yZWRTZXNzaW9uO1xuICAgIH0gZWxzZSB7XG4gICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0tFWSk7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpO1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlU2Vzc2lvbihzZXNzaW9uOiBSZWFkb25seVdhbGxldFNlc3Npb24pIHtcbiAgaWYgKCFBY2NBZGRyZXNzLnZhbGlkYXRlKHNlc3Npb24udGVycmFBZGRyZXNzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgJHtzZXNzaW9uLnRlcnJhQWRkcmVzc30gaXMgbm90IGEgdGVycmFBZGRyZXNzYCk7XG4gIH1cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHNlc3Npb24pKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU3RvcmVkU2Vzc2lvbigpIHtcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpO1xufVxuIl19